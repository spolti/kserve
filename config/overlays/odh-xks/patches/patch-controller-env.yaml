apiVersion: apps/v1
kind: Deployment
metadata:
  name: kserve-controller-manager
  namespace: opendatahub
spec:
  template:
    spec:
      containers:
      - name: manager
        env:
        - name: SERVICE_CA_SIGNING_SECRET_NAME
          value: "$(CA_SECRET_NAME)"
        - name: SERVICE_CA_SIGNING_SECRET_NAMESPACE
          value: "$(CA_SECRET_NAMESPACE)"
        - name: ISTIO_CA_CERTIFICATE_PATH
          value: "$(ISTIO_CA_CERTIFICATE_PATH)"
        # Controller toggles: enable only LLMInferenceService controller
        - name: ENABLE_ISVC_CONTROLLER
          value: "false"
        - name: ENABLE_LLMISVC_CONTROLLER
          value: "true"
        - name: ENABLE_TRAINED_MODEL_CONTROLLER
          value: "false"
        - name: ENABLE_INFERENCE_GRAPH_CONTROLLER
          value: "false"
        # Disable auth for xKS overlay (no Kuadrant/RHCL dependency)
        - name: LLMISVC_AUTH_DISABLED
          value: "true"
        # Disable monitoring for xKS overlay (no Prometheus Operator dependency)
        - name: LLMISVC_MONITORING_DISABLED
          value: "true"
        # Disable SCC for xKS overlay (no OpenShift SecurityContextConstraints)
        - name: LLMISVC_SCC_DISABLED
          value: "true"